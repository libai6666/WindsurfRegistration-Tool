# Windsurf 注册绑卡工具

一个功能强大的 Chrome 浏览器扩展，用于自动注册和管理 Windsurf (Codeium) 账号。

## 📋 项目简介

本扩展提供了自动化的 Windsurf 账号注册功能，包括：
- 自动填写注册表单
- 自动生成和管理邮箱（基于 Moemail API）
- 自动接收邮件验证码
- 账号信息导出
- 公告通知系统
- 美观的现代化 UI 界面

**版本**: V1.0.0

## 🚀 功能特性

### 核心功能

1. **自动注册**
   - 自动打开并检测 Windsurf/Codeium 注册页面
   - 自动生成随机邮箱前缀并在 Moemail 平台创建临时邮箱
   - 无需手动维护域名/序号，所有邮箱由插件实时创建
   - 表单信息填充、提交和状态回传全自动
   - 支持人机验证后的自动继续

2. **邮箱管理**
   - 自动生成随机邮箱前缀（15位大小写字母+数字）
   - 一键复制邮箱地址
   - 实时预览邮箱地址
   - 支持设置邮箱密码（可选）
   - 自动创建 Moemail 临时邮箱

3. **密码管理**
   - 自动生成安全密码（12-16位，包含大小写、数字、符号）
   - 密码显示/隐藏切换
   - 登录密码和邮箱密码独立管理
   - 一键生成随机密码

4. **邮件验证**
   - 深度集成 Moemail API：创建、轮询、删除全自动
   - 验证码到达后立即填入页面并尝试提交
   - 根据页面结构自动适配单输入框/多输入框验证码组件
   - 自动清理临时邮箱

5. **API Key 管理**
   - 安全存储 Moemail API Key
   - API Key 显示/隐藏切换
   - 一键测试 API Key 有效性
   - 自动保存到浏览器缓存

6. **账号管理**
   - 导出账号信息到桌面（JSON 格式）
   - 自动保存配置
   - 账号列表管理

7. **公告系统**
   - 自动获取服务器公告
   - 本地缓存机制
   - 智能更新检测

8. **UI 界面**
   - 现代化设计风格
   - 响应式布局
   - SVG 图标系统
   - 流畅的动画效果
   - 紧凑的布局设计

## 📦 安装说明

### 方法一：开发者模式安装（推荐）

1. **下载项目文件**
   - 将所有项目文件下载到本地目录

2. **打开 Chrome 扩展管理页面**
   - 在 Chrome 浏览器地址栏输入：`chrome://extensions/`
   - 或通过菜单：`更多工具` → `扩展程序`

3. **启用开发者模式**
   - 在扩展管理页面右上角，打开"开发者模式"开关

4. **加载扩展**
   - 点击"加载已解压的扩展程序"按钮
   - 选择项目文件所在的目录
   - 点击"选择文件夹"

5. **验证安装**
   - 扩展应该出现在扩展列表中
   - 浏览器工具栏会显示扩展图标

### 方法二：打包安装

1. 在扩展管理页面点击"打包扩展程序"
2. 选择项目根目录
3. 生成 `.crx` 文件后，可以分发给其他用户安装

## 📦 打包插件

### 方法一：使用 Chrome 扩展管理页面打包（推荐）

1. **打开扩展管理页面**
   - 在 Chrome 浏览器地址栏输入：`chrome://extensions/`
   - 或通过菜单：`更多工具` → `扩展程序`

2. **启用开发者模式**
   - 在扩展管理页面右上角，确保"开发者模式"开关已打开

3. **打包扩展**
   - 点击页面上的"打包扩展程序"按钮
   - 在"扩展程序根目录"中选择项目文件夹（包含 manifest.json 的目录）
   - "私有密钥文件"留空（首次打包会自动生成）
   - 点击"打包扩展程序"按钮

4. **获取打包文件**
   - 打包成功后，会在项目目录生成两个文件：
     - `.crx` 文件：扩展程序安装包（可以分发给用户）
     - `.pem` 文件：私有密钥文件（请妥善保管，用于后续更新）

5. **分发安装包**
   - 将 `.crx` 文件分发给用户
   - 用户可以通过拖拽 `.crx` 文件到 `chrome://extensions/` 页面来安装

### 方法二：使用命令行打包

1. **使用 Chrome 的打包工具**
   ```bash
   # Windows
   "C:\Program Files\Google\Chrome\Application\chrome.exe" --pack-extension="C:\Users\Administrator\Desktop\浏览器插件"
   
   # macOS
   /Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --pack-extension="/path/to/浏览器插件"
   
   # Linux
   google-chrome --pack-extension="/path/to/浏览器插件"
   ```

2. **打包结果**
   - 会在项目目录生成 `.crx` 和 `.pem` 文件

### 打包注意事项

1. **文件完整性**
   - 确保所有必需文件都在项目目录中
   - 检查 `manifest.json` 中引用的所有文件是否存在

2. **私有密钥文件（.pem）**
   - 首次打包会自动生成 `.pem` 文件
   - 后续更新扩展时需要使用相同的 `.pem` 文件
   - 请妥善保管，丢失后无法更新已发布的扩展

3. **版本号管理**
   - 更新扩展时，记得在 `manifest.json` 中更新版本号
   - 使用相同的 `.pem` 文件打包

4. **测试打包结果**
   - 打包后建议先测试安装
   - 检查所有功能是否正常

## 🎯 使用指南

### 首次使用

1. **配置 Moemail API Key**
   - 在"密码与API配置"区域输入您的 Moemail API Key
   - 点击测试按钮验证 API Key 是否有效
   - API Key 会在保存配置时自动存储

2. **配置邮箱**
   - 在"邮箱配置"区域：
     - 点击生成图标自动生成随机邮箱前缀
     - 或手动输入邮箱用户名
   - 域名固定为 `moemail.app`，插件会自动创建临时邮箱
   - 可选：设置邮箱密码（点击生成图标可自动生成）

3. **设置登录密码**
   - 在"密码与API配置"区域：
     - 输入密码（至少 8 位）
     - 或点击生成图标自动生成安全密码
   - 可以点击眼睛图标显示/隐藏密码

4. **开始注册**
   - 点击"打开"按钮打开注册页面
   - 或手动访问 https://windsurf.com/account/register
   - 点击"开始自动注册"按钮
   - 剩余流程（表单填写、人机检测、验证码获取）将自动执行

### 界面功能说明

#### 控制区域

- **开始自动注册**（主按钮）
  - 启动完整的自动注册流程
  - 自动创建邮箱、填写表单、接收验证码

- **填卡**（次要按钮）
  - 自动填写信用卡信息
  - 需要在账单页面使用

- **打开**（次要按钮）
  - 快速打开 Windsurf 注册页面
  - 如果当前页面已是注册页面，则提示已就绪

- **保存**（次要按钮）
  - 保存当前配置（邮箱前缀、密码、API Key）
  - 配置会自动保存到浏览器本地存储

- **导出**（次要按钮）
  - 导出所有已保存的账号信息
  - 以 JSON 格式保存到桌面

#### 邮箱配置区域

- **邮箱用户名**
  - 输入框：手动输入邮箱前缀
  - 生成按钮：自动生成 15 位随机前缀（大小写字母+数字）

- **邮箱域名**
  - 显示为 `moemail.app · 自动创建`
  - 系统会自动在 Moemail 创建临时邮箱

- **预览邮箱**
  - 实时显示完整邮箱地址
  - 复制按钮：一键复制邮箱到剪贴板

- **邮箱密码**（可选）
  - 输入框：设置邮箱密码
  - 眼睛图标：显示/隐藏密码
  - 生成图标：自动生成随机密码

#### 密码与API配置区域

- **登录密码**
  - 输入框：设置 Windsurf 账号登录密码
  - 眼睛图标：显示/隐藏密码
  - 生成图标：自动生成安全密码（12-16位）

- **Moemail API Key**
  - 输入框：输入您的 Moemail API Key
  - 眼睛图标：显示/隐藏 API Key
  - 测试图标：验证 API Key 是否有效
  - 提示：API Key 将在保存配置时自动存储

#### 运行状态区域

- **状态显示**
  - 实时显示当前运行状态
  - 支持成功、错误、运行中等状态样式

- **实时日志**
  - 显示详细的操作日志
  - 支持信息、成功、错误等日志类型
  - 清空按钮：一键清空所有日志

#### 使用说明区域

- **可折叠说明**
  - 点击标题可展开/折叠使用说明
  - 包含详细的使用步骤和注意事项

### 功能说明

#### 邮箱配置

- **邮箱用户名**：可以手动输入或点击生成图标自动生成 15 位混合字符串
- **邮箱域名**：固定为 `moemail.app`，无需手动管理，验证码也会同步回填
- **复制邮箱**：点击复制按钮可快速复制完整邮箱地址到剪贴板

#### 邮件验证

- 插件通过 Moemail API 创建临时邮箱、轮询验证码并在页面中自动填写
- 发生网络/人机失败时会在浮动面板提示，并自动清理临时邮箱
- 支持单输入框和多输入框验证码格式

#### API Key 管理

- 首次使用需要配置 Moemail API Key
- API Key 会加密存储到浏览器本地
- 支持测试 API Key 有效性
- 保存配置时会自动保存 API Key

#### 账号导出

- 点击"导出"按钮
- 账号信息会以 JSON 格式保存到桌面
- 包含：邮箱、密码、注册时间等信息

## 📁 项目结构

```
浏览器插件/
├── manifest.json              # 扩展配置文件
├── popup.html                 # 弹窗界面
├── popup.css                  # 样式文件（现代化UI设计）
├── popup-utils.js             # 弹窗核心逻辑 + 自动注册入口
├── background.js              # Service Worker：Moemail API 调度
├── storage-config.js          # 存储配置管理 + API Key 管理
├── notice-manager.js          # 公告管理器
├── content-script.js          # 注册页面自动化脚本
├── moemail-service.js         # Moemail API 封装
└── README.md                  # 说明文档
```

## 🔧 技术架构

### 核心技术

- **Manifest V3**: 使用最新的 Chrome 扩展 API
- **Chrome Storage API**: 本地数据存储
- **Fetch API**: HTTP 请求
- **ES6+**: 现代 JavaScript 语法
- **SVG Icons**: 矢量图标系统
- **CSS3**: 现代化样式和动画

### 模块说明

#### popup-utils.js
- 主要业务逻辑
- UI 事件处理
- 自动注册流程控制
- 邮箱和密码生成
- 配置管理

#### background.js
- Service Worker 后台服务
- Moemail API 请求处理
- 消息路由和转发

#### storage-config.js
- 封装 Chrome Storage API
- 提供统一的存储接口
- 包含错误处理和数据验证
- API Key 管理功能

#### content-script.js
- 注册页面自动化脚本
- 表单填写和提交
- 验证码自动填入
- 浮动面板显示

#### moemail-service.js
- Moemail API 封装
- 邮箱创建、查询、删除
- 消息轮询和验证码提取

#### notice-manager.js
- 获取和管理服务器公告
- 实现缓存机制和智能更新
- 通过事件通知 UI 更新

## ⚙️ 配置说明

### 存储键名

所有存储键名定义在 `storage-config.js` 中：

- `moemail_api_key`: Moemail API Key
- `emailPrefix`: 邮箱前缀
- `password`: 登录密码
- `savedAccounts`: 已保存的账号列表
- `NOTICE_CACHE`: 公告缓存
- `NOTICE_TIMESTAMP`: 公告时间戳
- `NOTICE_LAST_FETCH`: 最后获取时间
- `APP_CONFIG`: 应用配置
- `USER_SETTINGS`: 用户设置

### UI 配置

- **主色调**: 橙色 (#F45805)
- **强调色**: 蓝色 (#0460F7)
- **圆角**: 14px (大) / 10px (中) / 8px (小)
- **间距**: 紧凑布局，优化空间利用

## 🛠️ 开发说明

### 代码规范

- 使用 ES6+ 语法
- 添加 JSDoc 注释
- 统一的错误处理
- 清晰的变量命名
- 模块化代码结构

### 错误处理

所有模块都实现了完善的错误处理：

- **网络错误**: 自动重试和降级方案
- **超时错误**: 10秒超时机制
- **数据验证**: 输入验证和格式检查
- **用户提示**: 友好的错误消息
- **日志记录**: 详细的操作日志

### 调试

1. 打开 Chrome 开发者工具
2. 查看 Console 标签页
3. 所有日志都带有模块前缀，如：`[工具]`、`[Moemail]`、`[公告]` 等
4. 查看 Network 标签页检查 API 请求
5. 查看 Application 标签页检查存储数据

## ⚠️ 注意事项

1. **网络连接**
   - 需要稳定的网络连接
   - Moemail API 需要 HTTPS 连接

2. **权限要求**
   - 需要访问 Windsurf/Codeium 网站
   - 需要访问 Moemail API 服务器
   - 需要存储权限保存配置
   - 需要下载权限导出账号

3. **浏览器兼容性**
   - 仅支持 Chrome/Edge（Chromium 内核）
   - 需要 Manifest V3 支持
   - 建议使用最新版本浏览器

4. **API Key 安全**
   - API Key 存储在浏览器本地
   - 请勿分享您的 API Key
   - 定期检查 API Key 有效性

5. **使用限制**
   - 请遵守 Windsurf/Codeium 的使用条款
   - 请遵守 Moemail 的服务条款
   - 合理使用自动化功能

## 🐛 常见问题

### Q: 无法自动接收验证码？

A: 
- 检查 Moemail API Key 是否正确配置
- 点击测试按钮验证 API Key 是否有效
- 检查网络连接是否正常
- 查看控制台日志获取详细错误信息
- 确认 Moemail 服务是否可用

### Q: 注册失败？

A: 
- 检查 Windsurf 网站是否可访问
- 确认邮箱格式是否正确
- 检查密码是否符合要求（至少8位）
- 查看控制台日志获取详细错误信息
- 确认人机验证是否完成

### Q: 扩展无法加载？

A: 
- 确认所有文件都在同一目录
- 检查 manifest.json 格式是否正确
- 查看扩展管理页面的错误信息
- 确认浏览器版本是否支持 Manifest V3

### Q: 按钮点击无反应？

A: 
- 刷新扩展页面
- 检查控制台是否有错误信息
- 确认相关脚本文件是否正常加载
- 尝试重新加载扩展

### Q: API Key 测试失败？

A: 
- 确认 API Key 格式是否正确
- 检查 API Key 是否有效
- 确认网络连接正常
- 查看 Moemail 服务状态

## 📝 更新日志

### V1.0.0 (最新)

#### UI 优化
- ✅ 现代化 UI 设计，采用渐变和阴影效果
- ✅ 统一使用 SVG 图标系统，替换 emoji
- ✅ 优化布局，紧凑设计节省空间
- ✅ 添加流畅的动画和过渡效果
- ✅ 优化卡片和按钮的视觉层次

#### 功能增强
- ✅ 添加邮箱复制功能
- ✅ 添加 API Key 测试功能
- ✅ 添加邮箱密码生成功能
- ✅ 添加日志清空功能
- ✅ 优化配置保存逻辑（自动保存 API Key）
- ✅ 优化按钮布局（4个次要按钮合并为一行）

#### 代码优化
- ✅ 修复所有按钮的事件绑定
- ✅ 优化代码结构和可维护性
- ✅ 完善错误处理机制
- ✅ 添加用户友好的错误提示
- ✅ 统一图标样式和大小

#### 基础功能
- ✅ 添加 manifest.json 配置文件
- ✅ 代码去混淆和重构
- ✅ 移除卡密验证功能
- ✅ 更新名称为"windsurf注册绑卡工具"

## 📄 许可证

本项目仅供学习和研究使用。

## 🤝 贡献

欢迎提交 Issue 和 Pull Request。

## 📧 联系方式

如有问题或建议，请通过以下方式联系：
- 查看项目 Issues
- 提交 Pull Request

---

**免责声明**: 本工具仅供学习研究使用，请遵守相关网站的使用条款。使用本工具产生的任何后果由使用者自行承担。
